<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Article — ExtensionHub</title>
  <meta name="description" content="Article on ExtensionHub." />
  <link rel="canonical" href="https://extensionhub.in/blog/" />

  <meta property="og:type" content="article" />
  <meta property="og:title" content="Article — ExtensionHub" />
  <meta property="og:description" content="Article on ExtensionHub." />
  <meta property="og:image" content="https://extensionhub.in/assets/img/brand/og-default.png" />

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/assets/css/app.css" />
</head>

<body class="min-h-screen" data-post="stay-private-in-public">
  <div id="appHeader"></div>

  <main class="mx-auto max-w-4xl px-4 py-10">
    <article class="glass p-8">
      <div class="flex flex-wrap items-center justify-between gap-3">
        <div>
          <p id="postMeta" class="text-sm" style="color:var(--muted)"></p>
          <h1 id="postTitle" class="mt-2 text-3xl font-bold"></h1>
          <p id="postDesc" class="mt-3 text-base" style="color:var(--muted)"></p>
        </div>
        <a class="btn" href="/blog/">All articles</a>
      </div>

      <div id="postBody" class="mt-10 space-y-8"></div>

      <div id="postFaqWrap" class="mt-10">
        <h2 class="text-xl font-semibold">FAQ</h2>
        <div id="postFaq" class="mt-3 space-y-3"></div>
      </div>

      <div class="mt-10 card p-6">
        <h2 class="text-lg font-semibold">Next steps</h2>
        <p class="mt-2 text-sm" style="color:var(--muted)">
          Explore extensions: <a class="underline" href="/#extensions">Marketplace</a> ·
          <a class="underline" href="/about/">About</a> ·
          <a class="underline" href="/support/">Support</a>
        </p>
      </div>
    </article>
  </main>

  <div id="appFooter"></div>

  <script type="module">
    import { SITE } from "/data/data.js";
    import { BLOG } from "/data/blog.js";
    import { headerHTML, footerHTML, bindUIActions } from "/assets/js/ui.js";
    import { injectJSONLD, breadcrumbSchema } from "/assets/js/seo.js";

    document.getElementById("appHeader").innerHTML = headerHTML(SITE);
    document.getElementById("appFooter").innerHTML = footerHTML(SITE);
    bindUIActions();

    const domain = SITE.brand?.domain || "extensionhub.in";
    const baseUrl = `https://${domain}`;

    const slug = document.body.getAttribute("data-post") || "";
    const post = BLOG.find(p => p.slug === slug);

    if (!post) {
      document.title = "Article not found — ExtensionHub";
      document.getElementById("postTitle").textContent = "Article not found";
      document.getElementById("postDesc").textContent = "Please return to the blog page.";
      document.getElementById("postFaqWrap").style.display = "none";
      throw new Error("Post not found");
    }

    // SEO meta
    const title = `${post.title} — ExtensionHub`;
    document.title = title;

    const metaDesc = document.querySelector('meta[name="description"]');
    if (metaDesc) metaDesc.setAttribute("content", post.description);

    const canonical = document.querySelector('link[rel="canonical"]');
    if (canonical) canonical.setAttribute("href", `${baseUrl}/blog/${post.slug}/`);

    const ogt = document.querySelector('meta[property="og:title"]');
    const ogd = document.querySelector('meta[property="og:description"]');
    if (ogt) ogt.setAttribute("content", title);
    if (ogd) ogd.setAttribute("content", post.description);

    // Breadcrumb schema
    injectJSONLD(breadcrumbSchema([
      { name: "Home", url: `${baseUrl}/` },
      { name: "Blog", url: `${baseUrl}/blog/` },
      { name: post.title, url: `${baseUrl}/blog/${post.slug}/` }
    ]));

    // Article schema
    injectJSONLD({
      "@context": "https://schema.org",
      "@type": "Article",
      "headline": post.title,
      "description": post.description,
      "author": { "@type": "Person", "name": post.author || "ExtensionHub Team" },
      "publisher": { "@type": "Organization", "name": SITE.brand?.name || "ExtensionHub" },
      "datePublished": post.date,
      "dateModified": post.date,
      "mainEntityOfPage": `${baseUrl}/blog/${post.slug}/`
    });

    // Render
    document.getElementById("postMeta").textContent =
      `${post.category} · ${post.date} · ${post.readingMinutes} min read · ${post.author || "ExtensionHub Team"}`;

    document.getElementById("postTitle").textContent = post.title;
    document.getElementById("postDesc").textContent = post.description;

    const body = document.getElementById("postBody");
    body.innerHTML = (post.sections || []).map(s => `
      <section>
        <h2 class="text-xl font-semibold">${s.h2}</h2>
        ${(s.p || []).map(par => `<p class="mt-2 text-sm" style="color:var(--muted)">${par}</p>`).join("")}
      </section>
    `).join("");

    // FAQ
    const faqWrap = document.getElementById("postFaqWrap");
    const faqEl = document.getElementById("postFaq");
    const faq = post.faq || [];

    if (!faq.length) {
      faqWrap.style.display = "none";
    } else {
      faqEl.innerHTML = faq.map(x => `
        <details class="card p-4">
          <summary class="cursor-pointer font-semibold">${x.q}</summary>
          <div class="mt-2 text-sm" style="color:var(--muted)">${x.a}</div>
        </details>
      `).join("");

      injectJSONLD({
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": faq.slice(0, 8).map(({ q, a }) => ({
          "@type": "Question",
          "name": q,
          "acceptedAnswer": { "@type": "Answer", "text": a }
        }))
      });
    }
  </script>
</body>
</html>
